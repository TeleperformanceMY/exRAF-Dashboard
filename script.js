// Translations for all languages
const translations = {
    en: {
        pageLangLabel: "Choose Your Language:",
        dashboardTitle: "Referral Dashboard",
        dashboardSubtitle: "Enter your details to view your referral status",
        phoneLabel: "Phone Number:",
        phonePlaceholder: "Enter your phone number (01XXXXXXXX)",
        phoneError: "Please provide a valid phone number (01XXXXXXXX).",
        emailLabel: "Email Address:",
        emailPlaceholder: "Enter your email address",
        emailError: "Please provide a valid email address.",
        viewStatusBtn: "View Referral Status",
        backToRAF: "Back to Referral Form",
        yourReferralsTitle: "Your Referrals",
        backBtn: "Back",
        totalReferrals: "Total Referrals",
        hiredReferrals: "Hired",
        inProgress: "In Progress",
        statusDistribution: "Status Distribution",
        earningsTitle: "Your Earnings",
        earningsStage: "Stage",
        earningsAmount: "Amount (RM)",
        earningsCount: "Count",
        earningsTotal: "Total",
        remindFriendsTitle: "Remind Your Friends",
        remindFriendsText: "Help your friends complete their assessments to join Teleperformance!",
        remindBtn: "Send Reminder",
        tpGlobal: "TP Global",
        followMalaysia: "TP Malaysia",
        followThailand: "TP Thailand",
        noReferrals: "No referrals found with these details.",
        referralName: "Friend's Name",
        referralEmail: "Email",
        referralStage: "Stage",
        referralStatus: "Status",
        referralDate: "Application Date",
        referralDays: "Days in Stage",
        referralAction: "Action",
        remindBtn: "Remind",
        celebrateBtn: "Celebrate!",
        statusReceived: "Received Application",
        statusAssessment: "Endorsed to Assessment",
        statusTalent: "Endorsed to Talent Acquisition",
        statusOperations: "Endorsed to Operations",
        statusProbation: "Hired (in probation period)",
        statusPassed: "Hired (passed probation)",
        statusFailed: "Failed",
        statusUnreliable: "Unreliable",
        paymentNote: "Note: Payments will be made to your TnG eWallet linked to this phone number."
    },
    ja: {
        pageLangLabel: "言語を選択:",
        dashboardTitle: "紹介ダッシュボード",
        dashboardSubtitle: "詳細を入力して紹介状況を表示",
        phoneLabel: "電話番号:",
        phonePlaceholder: "電話番号を入力 (01XXXXXXXX)",
        phoneError: "有効な電話番号を入力してください (01XXXXXXXX)",
        emailLabel: "メールアドレス:",
        emailPlaceholder: "メールアドレスを入力",
        emailError: "有効なメールアドレスを入力してください",
        viewStatusBtn: "紹介状況を表示",
        backToRAF: "紹介フォームに戻る",
        yourReferralsTitle: "あなたの紹介",
        backBtn: "戻る",
        totalReferrals: "総紹介数",
        hiredReferrals: "採用",
        inProgress: "進行中",
        statusDistribution: "ステータス分布",
        earningsTitle: "あなたの収益",
        earningsStage: "ステージ",
        earningsAmount: "金額 (RM)",
        earningsCount: "カウント",
        earningsTotal: "合計",
        remindFriendsTitle: "友達にリマインダーを送る",
        remindFriendsText: "友達が審査を完了できるようサポートしましょう！",
        remindBtn: "リマインダー送信",
        tpGlobal: "TPグローバル",
        followMalaysia: "TPマレーシア",
        followThailand: "TPタイ",
        noReferrals: "該当する紹介は見つかりませんでした",
        referralName: "友達の名前",
        referralEmail: "メール",
        referralStage: "ステージ",
        referralStatus: "状態",
        referralDate: "申込日",
        referralDays: "ステージ日数",
        referralAction: "操作",
        remindBtn: "リマインダー",
        celebrateBtn: "お祝い！",
        statusReceived: "申込受付",
        statusAssessment: "審査に推薦",
        statusTalent: "人材獲得に推薦",
        statusOperations: "オペレーションに推薦",
        statusProbation: "採用（試用期間中）",
        statusPassed: "採用（試用期間通過）",
        statusFailed: "不合格",
        statusUnreliable: "信頼性なし",
        paymentNote: "注意: 支払いはこの電話番号にリンクされたTnG eWalletに行われます。"
    },
    ko: {
        pageLangLabel: "언어 선택:",
        dashboardTitle: "추천 대시보드",
        dashboardSubtitle: "추천 현황을 보려면 정보 입력",
        phoneLabel: "전화번호:",
        phonePlaceholder: "전화번호 입력 (01XXXXXXXX)",
        phoneError: "유효한 전화번호 입력 (01XXXXXXXX)",
        emailLabel: "이메일 주소:",
        emailPlaceholder: "이메일 주소 입력",
        emailError: "유효한 이메일 주소 입력",
        viewStatusBtn: "추천 현황 보기",
        backToRAF: "추천 양식으로 돌아가기",
        yourReferralsTitle: "귀하의 추천",
        backBtn: "뒤로",
        totalReferrals: "총 추천 수",
        hiredReferrals: "채용됨",
        inProgress: "진행 중",
        statusDistribution: "상태 분포",
        earningsTitle: "귀하의 수익",
        earningsStage: "단계",
        earningsAmount: "금액 (RM)",
        earningsCount: "카운트",
        earningsTotal: "합계",
        remindFriendsTitle: "친구들에게 알림 보내기",
        remindFriendsText: "친구들이 평가를 완료할 수 있도록 도와주세요!",
        remindBtn: "알림 보내기",
        tpGlobal: "TP 글로벌",
        followMalaysia: "TP 말레이시아",
        followThailand: "TP 태국",
        noReferrals: "일치하는 추천 없음",
        referralName: "친구 이름",
        referralEmail: "이메일",
        referralStage: "단계",
        referralStatus: "상태",
        referralDate: "신청 날짜",
        referralDays: "단계 일수",
        referralAction: "조치",
        remindBtn: "알림",
        celebrateBtn: "축하!",
        statusReceived: "신청서 접수",
        statusAssessment: "평가 추천",
        statusTalent: "인재 채용 추천",
        statusOperations: "운영 추천",
        statusProbation: "채용 (수습 기간)",
        statusPassed: "채용 (수습 통과)",
        statusFailed: "실패",
        statusUnreliable: "신뢰할 수 없음",
        paymentNote: "참고: 결제는 이 전화번호에 연결된 TnG eWallet으로 진행됩니다."
    },
    "zh-CN": {
        pageLangLabel: "选择语言:",
        dashboardTitle: "推荐仪表板",
        dashboardSubtitle: "输入信息查看推荐状态",
        phoneLabel: "电话号码:",
        phonePlaceholder: "输入电话号码 (01XXXXXXXX)",
        phoneError: "请输入有效电话号码 (01XXXXXXXX)",
        emailLabel: "电子邮件:",
        emailPlaceholder: "输入电子邮件",
        emailError: "请输入有效电子邮件",
        viewStatusBtn: "查看推荐状态",
        backToRAF: "返回推荐表格",
        yourReferralsTitle: "您的推荐",
        backBtn: "返回",
        totalReferrals: "总推荐数",
        hiredReferrals: "已雇用",
        inProgress: "进行中",
        statusDistribution: "状态分布",
        earningsTitle: "您的收益",
        earningsStage: "阶段",
        earningsAmount: "金额 (RM)",
        earningsCount: "计数",
        earningsTotal: "总计",
        remindFriendsTitle: "提醒您的朋友",
        remindFriendsText: "帮助您的朋友完成评估加入Teleperformance！",
        remindBtn: "发送提醒",
        tpGlobal: "TP全球",
        followMalaysia: "TP马来西亚",
        followThailand: "TP泰国",
        noReferrals: "未找到匹配推荐",
        referralName: "朋友姓名",
        referralEmail: "电子邮件",
        referralStage: "阶段",
        referralStatus: "状态",
        referralDate: "申请日期",
        referralDays: "阶段天数",
        referralAction: "操作",
        remindBtn: "提醒",
        celebrateBtn: "庆祝！",
        statusReceived: "已收申请",
        statusAssessment: "推荐评估",
        statusTalent: "推荐人才获取",
        statusOperations: "推荐运营",
        statusProbation: "雇用（试用期）",
        statusPassed: "雇用（通过试用）",
        statusFailed: "失败",
        statusUnreliable: "不可靠",
        paymentNote: "注意：付款将转入与此电话号码关联的TnG电子钱包。"
    },
    "zh-HK": {
        pageLangLabel: "選擇語言:",
        dashboardTitle: "推薦儀表板",
        dashboardSubtitle: "輸入信息查看推薦狀態",
        phoneLabel: "電話號碼:",
        phonePlaceholder: "輸入電話號碼 (01XXXXXXXX)",
        phoneError: "請輸入有效電話號碼 (01XXXXXXXX)",
        emailLabel: "電子郵件:",
        emailPlaceholder: "輸入電子郵件",
        emailError: "請輸入有效電子郵件",
        viewStatusBtn: "查看推薦狀態",
        backToRAF: "返回推薦表格",
        yourReferralsTitle: "您的推薦",
        backBtn: "返回",
        totalReferrals: "總推薦數",
        hiredReferrals: "已僱用",
        inProgress: "進行中",
        statusDistribution: "狀態分佈",
        earningsTitle: "您的收益",
        earningsStage: "階段",
        earningsAmount: "金額 (RM)",
        earningsCount: "計數",
        earningsTotal: "總計",
        remindFriendsTitle: "提醒您的朋友",
        remindFriendsText: "幫助您的朋友完成評估加入Teleperformance！",
        remindBtn: "發送提醒",
        tpGlobal: "TP全球",
        followMalaysia: "TP馬來西亞",
        followThailand: "TP泰國",
        noReferrals: "未找到匹配推薦",
        referralName: "朋友姓名",
        referralEmail: "電子郵件",
        referralStage: "階段",
        referralStatus: "狀態",
        referralDate: "申請日期",
        referralDays: "階段天數",
        referralAction: "操作",
        remindBtn: "提醒",
        celebrateBtn: "慶祝！",
        statusReceived: "已收申請",
        statusAssessment: "推薦評估",
        statusTalent: "推薦人才獲取",
        statusOperations: "推薦運營",
        statusProbation: "僱用（試用期）",
        statusPassed: "僱用（通過試用）",
        statusFailed: "失敗",
        statusUnreliable: "不可靠",
        paymentNote: "注意：付款將轉入與此電話號碼關聯的TnG電子錢包。"
    }
};

// Earnings structure
const earningsStructure = {
    assessment: { amount: 50, label: "Pass Assessment" },
    probation: { amount: 750, label: "Pass Probation" }
};

// Sample data in JSON format
const sampleData = {
    "60123456789:fansheng072799@gmail.com": [
        {
            name: "Fan Sheng Chen",
            email: "fansheng072799@gmail.com",
            stage: "Hired",
            status: "Terminated before 90 days",
            statusType: "unreliable",
            applicationDate: "2025-01-31",
            hireDate: "2025-02-06",
            daysInStage: 5,
            category: "Hospitality/Travel",
            source: "TWO95",
            needsAction: false
        },
        {
            name: "John Doe",
            email: "john.doe@example.com",
            stage: "Assessment",
            status: "Endorsed to Assessment",
            statusType: "assessment",
            applicationDate: "2025-03-15",
            hireDate: "",
            daysInStage: 12,
            category: "Automotive",
            source: "Employee Referral",
            needsAction: true
        }
    ],
    "60123456788:keerthanajahanathan95@gmail.com": [
        {
            name: "Keerthana Jahanathan",
            email: "keerthanajahanathan95@gmail.com",
            stage: "Hired",
            status: "Successfully hired",
            statusType: "passed",
            applicationDate: "2024-04-30",
            hireDate: "2024-05-13",
            daysInStage: 13,
            category: "Automotive",
            source: "TWO95",
            needsAction: false
        },
        {
            name: "Devendhiran Pillai",
            email: "devendhiranpillai@gmail.com",
            stage: "Offer Presented",
            status: "Endorsed to Talent Acquisition",
            statusType: "talent",
            applicationDate: "2024-07-01",
            hireDate: "",
            daysInStage: 45,
            category: "Hospitality/Travel",
            source: "TWO95",
            needsAction: true
        },
        {
            name: "Alice Smith",
            email: "alice.smith@example.com",
            status: "Received Application",
            statusType: "received",
            stage: "Application",
            applicationDate: "2025-02-20",
            daysInStage: 8,
            needsAction: false
        }
    ]
};

document.addEventListener('DOMContentLoaded', function() {
    // Set current year
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    let currentLanguage = 'en';
    let statusChart = null;
    
    // Update translations
    function updateTranslations() {
        const translation = translations[currentLanguage] || translations.en;
        
        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            if (translation[key]) {
                el.textContent = translation[key];
            }
        });
        
        document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
            const key = el.getAttribute('data-translate-placeholder');
            if (translation[key]) {
                el.placeholder = translation[key];
            }
        });
    }
    
    // Language change handler
    document.getElementById('lang-select').addEventListener('change', function() {
        currentLanguage = this.value;
        updateTranslations();
        
        // Refresh chart if it exists
        if (statusChart) {
            const referrals = getCurrentReferrals();
            if (referrals) {
                updateChart(referrals);
                updateEarningsTable(referrals);
                updateReminderSection(referrals);
            }
        }
    });
    
    // Validate phone number
    function validatePhone(phone) {
        const regex = /^01\d{8,9}$/;
        return regex.test(phone);
    }
    
    // Validate email
    function validateEmail(email) {
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return regex.test(email);
    }
    
    // Show error message
    function showError(input, message) {
        const formControl = input.closest('.mb-3');
        const error = formControl.querySelector('.invalid-feedback');
        
        formControl.classList.add('was-validated');
        error.textContent = message;
        error.style.display = 'block';
        input.classList.add('is-invalid');
    }
    
    // Clear error
    function clearError(input) {
        const formControl = input.closest('.mb-3');
        const error = formControl.querySelector('.invalid-feedback');
        
        formControl.classList.remove('was-validated');
        error.style.display = 'none';
        input.classList.remove('is-invalid');
    }
    
    // Get referrals for current user
    function getReferrals(phone, email) {
        const key = `${phone}:${email}`;
        return sampleData[key] || [];
    }
    
    // Get current referrals (for chart refresh)
    function getCurrentReferrals() {
        const phone = document.getElementById('dashboard-phone').value.trim();
        const email = document.getElementById('dashboard-email').value.trim();
        return getReferrals(phone, email);
    }
    
    // Update earnings table
    function updateEarningsTable(referrals) {
        const earningsBody = document.getElementById('earnings-body');
        earningsBody.innerHTML = '';
        
        let totalEarnings = 0;
        
        // Calculate counts for each earning stage
        const earningCounts = {
            assessment: referrals.filter(r => r.statusType === 'passed' || r.statusType === 'probation').length,
            probation: referrals.filter(r => r.statusType === 'passed').length
        };
        
        // Add rows for each earning type
        Object.entries(earningsStructure).forEach(([key, earning]) => {
            const count = earningCounts[key] || 0;
            const total = count * earning.amount;
            totalEarnings += total;
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${translations[currentLanguage][`status${key.charAt(0).toUpperCase() + key.slice(1)}`] || earning.label}</td>
                <td>RM ${earning.amount}</td>
                <td>${count}</td>
                <td>RM ${total}</td>
            `;
            earningsBody.appendChild(row);
        });
        
        // Update total earnings
        document.getElementById('total-earnings').textContent = `RM ${totalEarnings}`;
    }
    
    // Update reminder section
    function updateReminderSection(referrals) {
        const friendsToRemind = document.getElementById('friends-to-remind');
        friendsToRemind.innerHTML = '';
        
        const friendsNeedingReminder = referrals.filter(r => r.needsAction);
        
        if (friendsNeedingReminder.length === 0) {
            friendsToRemind.innerHTML = `
                <div class="col-12 text-center">
                    <p class="text-muted" data-translate="noRemindersNeeded">All your friends are on track!</p>
                </div>
            `;
            updateTranslations();
            return;
        }
        
        friendsNeedingReminder.forEach(friend => {
            const col = document.createElement('div');
            col.className = 'col-md-6 mb-3';
            
            col.innerHTML = `
                <div class="friend-to-remind">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h5>${friend.name}</h5>
                        <span class="badge bg-warning">${translations[currentLanguage].statusAssessment}</span>
                    </div>
                    <p class="small text-muted mb-2">${friend.email}</p>
                    <p class="small mb-2"><strong>${translations[currentLanguage].referralDays}:</strong> ${friend.daysInStage}</p>
                    <button class="btn btn-sm btn-primary w-100 remind-btn" data-translate="remindBtn">
                        ${translations[currentLanguage].remindBtn}
                    </button>
                </div>
            `;
            
            friendsToRemind.appendChild(col);
        });
        
        updateTranslations();
    }
    
    // Form submission
    document.getElementById('dashboard-submit').addEventListener('click', function() {
        const phone = document.getElementById('dashboard-phone').value.trim();
        const email = document.getElementById('dashboard-email').value.trim();
        let isValid = true;
        
        // Validate phone
        if (!phone) {
            showError(document.getElementById('dashboard-phone'), 
                     translations[currentLanguage].phoneError);
            isValid = false;
        } else if (!validatePhone(phone)) {
            showError(document.getElementById('dashboard-phone'), 
                     translations[currentLanguage].phoneError);
            isValid = false;
        } else {
            clearError(document.getElementById('dashboard-phone'));
        }
        
        // Validate email
        if (!email) {
            showError(document.getElementById('dashboard-email'), 
                     translations[currentLanguage].emailError);
            isValid = false;
        } else if (!validateEmail(email)) {
            showError(document.getElementById('dashboard-email'), 
                     translations[currentLanguage].emailError);
            isValid = false;
        } else {
            clearError(document.getElementById('dashboard-email'));
        }
        
        if (!isValid) return;
        
        // Get referrals
        const referrals = getReferrals(phone, email);
        
        // Show results
        showReferralResults(referrals);
    });
    
    // Back button
    document.getElementById('dashboard-back').addEventListener('click', function() {
        document.getElementById('auth-step').style.display = 'block';
        document.getElementById('results-step').style.display = 'none';
    });
    
    // Show referral results
    function showReferralResults(referrals) {
        document.getElementById('auth-step').style.display = 'none';
        document.getElementById('results-step').style.display = 'block';
        
        // Update stats
        document.getElementById('total-referrals').textContent = referrals.length;
        document.getElementById('hired-referrals').textContent = referrals.filter(r => r.stage === 'Hired').length;
        document.getElementById('progress-referrals').textContent = referrals.filter(r => r.stage !== 'Hired').length;
        
        // Update chart
        updateChart(referrals);
        
        // Update earnings table
        updateEarningsTable(referrals);
        
        // Update reminder section
        updateReminderSection(referrals);
        
        // Update referral list
        const referralList = document.getElementById('referral-list');
        referralList.innerHTML = '';
        
        if (referrals.length === 0) {
            referralList.innerHTML = `
                <div class="alert alert-info" data-translate="noReferrals">
                    ${translations[currentLanguage].noReferrals}
                </div>
            `;
            updateTranslations();
            return;
        }
        
        referrals.forEach(referral => {
            const item = document.createElement('div');
            item.className = `card mb-3 status-${referral.statusType}`;
            
            // Get status translation
            const statusKey = `status${referral.statusType.charAt(0).toUpperCase() + referral.statusType.slice(1)}`;
            const statusTranslation = translations[currentLanguage][statusKey] || referral.status;
            
            // Action button
            let actionButton = '';
            if (referral.needsAction) {
                actionButton = `
                    <button class="btn btn-sm btn-primary remind-btn" data-translate="remindBtn">
                        ${translations[currentLanguage].remindBtn}
                    </button>
                `;
            } else if (referral.stage === 'Hired' && referral.statusType === 'passed') {
                actionButton = `
                    <button class="btn btn-sm btn-success celebrate-btn" data-translate="celebrateBtn">
                        ${translations[currentLanguage].celebrateBtn}
                    </button>
                `;
            }
            
            item.innerHTML = `
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <div>
                            <h5 class="mb-1">${referral.name}</h5>
                            <p class="mb-1 text-muted small">${referral.email}</p>
                        </div>
                        <span class="badge bg-secondary">${statusTranslation}</span>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <small class="text-muted" data-translate="referralStage">Stage</small>
                            <p>${referral.stage}</p>
                        </div>
                        <div class="col-md-3">
                            <small class="text-muted" data-translate="referralDate">Application Date</small>
                            <p>${new Date(referral.applicationDate).toLocaleDateString()}</p>
                        </div>
                        <div class="col-md-3">
                            <small class="text-muted" data-translate="referralDays">Days in Stage</small>
                            <p>${referral.daysInStage}</p>
                        </div>
                        <div class="col-md-3 text-end">
                            ${actionButton}
                        </div>
                    </div>
                </div>
            `;
            
            referralList.appendChild(item);
        });
        
        // Add payment note
        const paymentNote = document.createElement('div');
        paymentNote.className = 'alert alert-warning mt-3';
        paymentNote.innerHTML = `
            <i class="fas fa-info-circle me-2"></i>
            <span data-translate="paymentNote">${translations[currentLanguage].paymentNote}</span>
        `;
        referralList.appendChild(paymentNote);
        
        // Update translations for dynamic content
        updateTranslations();
    }
    
    // Update chart with referral data
    function updateChart(referrals) {
        const ctx = document.getElementById('statusChart').getContext('2d');
        const translation = translations[currentLanguage] || translations.en;
        
        // Count status types
        const statusCounts = {
            received: referrals.filter(r => r.statusType === 'received').length,
            assessment: referrals.filter(r => r.statusType === 'assessment').length,
            talent: referrals.filter(r => r.statusType === 'talent').length,
            operations: referrals.filter(r => r.statusType === 'operations').length,
            probation: referrals.filter(r => r.statusType === 'probation').length,
            passed: referrals.filter(r => r.statusType === 'passed').length,
            failed: referrals.filter(r => r.statusType === 'failed').length,
            unreliable: referrals.filter(r => r.statusType === 'unreliable').length
        };
        
        // Prepare data for chart
        const labels = [
            translation.statusReceived,
            translation.statusAssessment,
            translation.statusTalent,
            translation.statusOperations,
            translation.statusProbation,
            translation.statusPassed,
            translation.statusFailed,
            translation.statusUnreliable
        ];
        
        const data = [
            statusCounts.received,
            statusCounts.assessment,
            statusCounts.talent,
            statusCounts.operations,
            statusCounts.probation,
            statusCounts.passed,
            statusCounts.failed,
            statusCounts.unreliable
        ];
        
        const backgroundColors = [
            '#fff3cd', // received
            '#fff3cd', // assessment
            '#fff3cd', // talent
            '#fff3cd', // operations
            '#d4edda', // probation
            '#28a745', // passed
            '#f8d7da', // failed
            '#f8d7da'  // unreliable
        ];
        
        const borderColors = [
            '#ffc107', // received
            '#ffc107', // assessment
            '#ffc107', // talent
            '#ffc107', // operations
            '#28a745', // probation
            '#218838', // passed
            '#dc3545', // failed
            '#dc3545'  // unreliable
        ];
        
        // Destroy previous chart if it exists
        if (statusChart) {
            statusChart.destroy();
        }
        
        // Create new chart
        statusChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: translation.referralStatus,
                    data: data,
                    backgroundColor: backgroundColors,
                    borderColor: borderColors,
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.parsed.y} ${context.parsed.y === 1 ? 'referral' : 'referrals'}`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 1
                        }
                    }
                }
            }
        });
    }
    
    // Handle remind button clicks
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('remind-btn')) {
            const referralItem = e.target.closest('.friend-to-remind') || e.target.closest('.card');
            const name = referralItem.querySelector('h5').textContent;
            
            alert(`${translations[currentLanguage].remindBtn} sent to ${name}!`);
        }
        
        if (e.target.classList.contains('celebrate-btn')) {
            alert('🎉 ' + translations[currentLanguage].celebrateBtn + ' 🎉');
        }
    });
    
    // Initialize translations
    updateTranslations();
    
    // Auto-focus phone input
    document.getElementById('dashboard-phone').focus();
    
    // Prevent non-numeric input in phone field
    document.getElementById('dashboard-phone').addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
});
